!function(t){"use strict";function e(t){var e=/^\s+|\s+$/g;return t.replace(e,"")}function r(){this.attributes={},this.filters={},this.phrases={},this.sequence=[]}var n,i,s={deafultText:"Missing phrase: ",filter:"|",locale:"en",notation:".",throwError:!0};r.prototype.set=function(t){for(var e in t)this.attributes[e]=t[e];return this},r.prototype.restore=function(){return this.constructor.call(this),this},r.prototype.parse=function(t){var r=t.split(this.attributes.filter),n=r.length-1;for(t=e(r[0]),r=(this.attributes.filters||[]).concat(r.slice(1));n--;)this.sequence.push(e(r[n]));return t},r.prototype.process=function(t,r){var n,i=this.sequence.length;if(t=this.phrases[t],void 0!==t){for(;i--;)n=this.filters[this.sequence[i]],n instanceof Function&&(t=n.call({},t,r||{}));t=e(t)}return this.sequence=[],t},r.prototype.extend=function(t,e){var r,n;for(r in t)n=t[r],void 0!==e&&(r=e+this.attributes.notation+r),n instanceof Object?this.extend(n,r):this.phrases[r]=n;return this},n=new r,t.wordsmith=t.ws=i=function(t,e){return t=n.parse(t),n.process(t,e)||(i.get("throwError")?i.get("deafultText")+t:"")},i.extend=function(t,e){var r={};return t&&t.constructor===String?r[t]=e:r=t||r,n.extend(r),this},i.set=function(t,e){var r={};return t&&t.constructor===String?r[t]=e:r=t||r,n.set(r),this},i.get=function(t){return n.attributes[t]},i.replace=function(t){return n.phrases=t||{},this},i.restore=function(){return n.restore(),this.set(s),this},i.registerFilter=function(t,e){if(t&&t.constructor===String)return n.filters[t]=e,this;for(e in t)n.filters[e]=t[e];return this},i.restore()}(this),function(t){"use strict";var e=t.wordsmith;e.set("expression",/%\{(.*?)\}/g),e.registerFilter("expression",function(t,r){var n=e.get("expression");return t.replace(n,function(t,e){return r[e]||""})})}(this),function(t){"use strict";var e=t.wordsmith;e.set("nested",/ws\((.*?)\)/g),e.registerFilter("nested",function(t,r){var n=e.get("nested");return t.replace(n,function(t,n){return e(n,r)})})}(this),function(t){"use strict";function e(t){var e,i,s,o=r.get("locale")||"en";for(s=n.length-1;s;s--)for(e=n[s].slice(1),i=e.length;i--;)if(e[i]===o)return n[s][0](t)}var r=t.wordsmith,n=[[function(t){return t%10!==1||t%100===11?1:0},"is"],[function(t){return 1===t?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2},"pl"],[function(t){return 1===t?0:t>=2&&4>=t?1:2},"cs"],[function(t){return t%10===1&&t%100!==11?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2},"hr","ru"],[function(t){return t>1?1:0},"fr","tl","pt-br"],[function(t){return 1!==t?1:0},"da","de","en","es","fi","gb","el","he","hu","it","nl","no","pt","sv","uk"],[function(){return 0},"fa","id","ja","ko","lo","ms","th","tr","zh"]];r.set({delimiter:"||"}),r.registerFilter("pluralize",function(t,n){var i,s,o=r.get("delimiter");if(~t.indexOf(o)){if(t=t.split(o),isNaN(n)){for(i in n)if(!isNaN(n[i])){s=+n[i];break}}else s=+n;t=t[e(s||0)]}return t})}(this);