!function(t){"use strict";function e(t){var e=/^\s+|\s+$/g;return t.replace(e,"")}function r(t,e){var r={};return t&&t.constructor===String?r[t]=e:r=t||r,r}function n(){this.attributes={},this.filters={},this.phrases={},this.sequence=[]}var i,s,o={deafultText:"Missing phrase: ",filter:"|",filters:[],locale:"en",notation:".",throwError:!0};n.prototype.extend=function(t,e){var r,n;for(r in t)n=t[r],void 0!==e&&(r=e+this.attributes.notation+r),n instanceof Object?this.extend(n,r):this.phrases[r]=n;return this},n.prototype.parse=function(t,r){var n=t.split(this.attributes.filter);for(t=e(n[0]),n=this.attributes.filters.concat(n.slice(1),r||[]),r=n.length;r--;)this.sequence.push(e(n[r]));return t},n.prototype.process=function(t,r){var n,i=this.sequence.length;if(t=this.phrases[t],void 0!==t){for(;i--;)n=this.filters[this.sequence[i]],n instanceof Function&&(t=n.call({},t,r||{}));t=e(t)}return this.sequence=[],t},n.prototype.restore=function(){return this.constructor.call(this),this},i=new n,t.wordsmith=t.ws=s=function(t,e,r){return!e||e.sort instanceof Function||(r=e,e=[]),t=i.parse(t,e),i.process(t,r)||(s.get("throwError")?s.get("deafultText")+t:"")},s.extend=function(){return i.extend(r.apply(this,arguments)),this},s.get=function(t){return i.attributes[t]},s.registerFilter=function(t,e){if(t&&t.constructor===String)return i.filters[t]=e,this;for(e in t)i.filters[e]=t[e];return this},s.empty=function(t){return i.phrases=t||{},this},s.restore=function(){return i.restore(),this.set(o),this},s.set=function(){var t,e=r.apply(this,arguments);for(t in e)i.attributes[t]=e[t];return this},s.restore()}(this),function(t){"use strict";var e=t.wordsmith;e.set("expression",/%\{(.*?)\}/g),e.registerFilter("expression",function(t,r){var n=e.get("expression");return t.replace(n,function(t,e){return r[e]||""})})}(this),function(t){"use strict";var e=t.wordsmith;e.set("nested",/ws\((.*?)\)/g),e.registerFilter("nested",function(t,r){var n=e.get("nested");return t.replace(n,function(t,n){return e(n,r)})})}(this),function(t){"use strict";function e(t){var e,i,s,o=r.get("locale")||"en";for(s=n.length-1;s;s--)for(e=n[s].slice(1),i=e.length;i--;)if(e[i]===o)return n[s][0](t)}var r=t.wordsmith,n=[[function(t){return t%10!==1||t%100===11?1:0},"is"],[function(t){return 1===t?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2},"pl"],[function(t){return 1===t?0:t>=2&&4>=t?1:2},"cs"],[function(t){return t%10===1&&t%100!==11?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2},"hr","ru"],[function(t){return t>1?1:0},"fr","tl","pt-br"],[function(t){return 1!==t?1:0},"da","de","en","es","fi","gb","el","he","hu","it","nl","no","pt","sv","uk"],[function(){return 0},"fa","id","ja","ko","lo","ms","th","tr","zh"]];r.set({delimiter:"||"}),r.registerFilter("pluralize",function(t,n){var i,s,o=r.get("delimiter");if(~t.indexOf(o)){if(t=t.split(o),isNaN(n)){for(i in n)if(!isNaN(n[i])){s=+n[i];break}}else s=+n;t=t[e(s||0)]}return t})}(this);